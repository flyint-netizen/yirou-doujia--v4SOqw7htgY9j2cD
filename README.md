[合集 \- FFmpeg开发实战(61\)](https://github.com)[1\.FFmpeg开发笔记（一）搭建Linux系统的开发环境2023\-04\-16](https://github.com/aqi00/p/17323833.html)[2\.FFmpeg开发笔记（二）搭建Windows系统的开发环境2023\-04\-29](https://github.com/aqi00/p/17363751.html)[3\.FFmpeg开发笔记（三）FFmpeg的可执行程序介绍03\-09](https://github.com/aqi00/p/18062895)[4\.FFmpeg开发笔记（四）FFmpeg的动态链接库介绍03\-10](https://github.com/aqi00/p/18062898)[5\.FFmpeg开发笔记（五）更新MSYS的密钥环03\-16](https://github.com/aqi00/p/18062901)[6\.FFmpeg开发笔记（六）如何访问Github下载FFmpeg源码03\-17](https://github.com/aqi00/p/18062902)[7\.FFmpeg开发笔记（九）Linux交叉编译Android的x265库03\-30](https://github.com/aqi00/p/18078413)[8\.FFmpeg开发笔记（十）Linux环境给FFmpeg集成vorbis和amr03\-31](https://github.com/aqi00/p/18078414)[9\.FFmpeg开发笔记（十一）Windows环境给FFmpeg集成vorbis和amr04\-05](https://github.com/aqi00/p/18078415)[10\.FFmpeg开发笔记（七）欧拉系统编译安装FFmpeg03\-23](https://github.com/aqi00/p/18062905)[11\.FFmpeg开发笔记（八）Linux交叉编译Android的FFmpeg库03\-24](https://github.com/aqi00/p/18062906)[12\.FFmpeg开发笔记（十二）Linux环境给FFmpeg集成libopus和libvpx04\-06](https://github.com/aqi00/p/18105739)[13\.FFmpeg开发笔记（十三）Windows环境给FFmpeg集成libopus和libvpx04\-13](https://github.com/aqi00/p/18105744)[14\.FFmpeg开发笔记（十四）FFmpeg音频重采样的缓存04\-14](https://github.com/aqi00/p/18105749)[15\.FFmpeg开发笔记（十五）详解MediaMTX的推拉流04\-20](https://github.com/aqi00/p/18105753)[16\.FFmpeg开发笔记（十六）Linux交叉编译Android的OpenSSL库04\-21](https://github.com/aqi00/p/18132687)[17\.FFmpeg开发笔记（十七）Windows环境给FFmpeg集成字幕库libass04\-27](https://github.com/aqi00/p/18132702)[18\.FFmpeg开发笔记（十八）FFmpeg兼容各种音频格式的播放05\-04](https://github.com/aqi00/p/18132704)[19\.FFmpeg开发笔记（十九）FFmpeg开启两个线程分别解码音视频05\-05](https://github.com/aqi00/p/18161897)[20\.FFmpeg开发笔记（二十）Linux环境给FFmpeg集成AVS3解码器05\-12](https://github.com/aqi00/p/18161901)[21\.FFmpeg开发笔记（二十一）Windows环境给FFmpeg集成AVS3解码器05\-18](https://github.com/aqi00/p/18161908)[22\.FFmpeg开发笔记（二十二）FFmpeg中SAR与DAR的显示宽高比05\-19](https://github.com/aqi00/p/18161912)[23\.FFmpeg开发笔记（二十三）使用OBS Studio开启RTMP直播推流05\-26](https://github.com/aqi00/p/18199486)[24\.FFmpeg开发笔记（二十四）Linux环境给FFmpeg集成AV1的编解码器05\-27](https://github.com/aqi00/p/18199491)[25\.FFmpeg开发笔记（二十五）Linux环境给FFmpeg集成libwebp06\-01](https://github.com/aqi00/p/18199496)[26\.FFmpeg开发笔记（二十六）Linux环境安装ZLMediaKit实现视频推流06\-02](https://github.com/aqi00/p/18199499)[27\.FFmpeg开发笔记（二十七）解决APP无法访问ZLMediaKit的直播链接问题06\-08](https://github.com/aqi00/p/18199503)[28\.FFmpeg开发笔记（二十八）Linux环境给FFmpeg集成libxvid06\-09](https://github.com/aqi00/p/18199506)[29\.FFmpeg开发笔记（二十九）Windows环境给FFmpeg集成libxvid06\-15](https://github.com/aqi00/p/18239870)[30\.FFmpeg开发笔记（三十）解析H.264码流中的SPS帧和PPS帧06\-16](https://github.com/aqi00/p/18239876)[31\.FFmpeg开发笔记（三十一）使用RTMP Streamer开启APP直播推流06\-22](https://github.com/aqi00/p/18239879):[豆荚加速器](https://yirou.org)[32\.FFmpeg开发笔记（三十二）利用RTMP协议构建电脑与手机的直播Demo06\-23](https://github.com/aqi00/p/18239882)[33\.FFmpeg开发笔记（三十三）分析ZLMediaKit对H.264流的插帧操作06\-29](https://github.com/aqi00/p/18240179)[34\.FFmpeg开发笔记（三十四）Linux环境给FFmpeg集成libsrt和librist06\-30](https://github.com/aqi00/p/18240185)[35\.FFmpeg开发笔记（三十五）Windows环境给FFmpeg集成libsrt07\-06](https://github.com/aqi00/p/18240192)[36\.FFmpeg开发笔记（三十六）Linux环境安装SRS实现视频直播推流07\-07](https://github.com/aqi00/p/18240199)[37\.FFmpeg开发笔记全目录（FFmpeg开发实战详解，含直播系统的搭建过程）06\-17](https://github.com/aqi00/p/18250735)[38\.FFmpeg开发笔记（三十七）分析SRS对HLS协议里TS包的插帧操作07\-13](https://github.com/aqi00/p/18288623)[39\.FFmpeg开发笔记（三十八）APP如何访问SRS推流的RTMP直播地址07\-14](https://github.com/aqi00/p/18288628)[40\.FFmpeg开发笔记（三十九）给Visual Studio的C\+\+工程集成FFmpeg07\-20](https://github.com/aqi00/p/18288635)[41\.FFmpeg开发笔记（四十）Nginx集成rtmp模块实现RTMP推拉流07\-21](https://github.com/aqi00/p/18288637)[42\.FFmpeg开发笔记（四十一）结合OBS与MediaMTX实现SRT直播推流07\-27](https://github.com/aqi00/p/18288640)[43\.FFmpeg开发笔记（四十二）使用ZLMediaKit开启SRT视频直播服务07\-28](https://github.com/aqi00/p/18288642)[44\.FFmpeg开发笔记（四十三）使用SRS开启SRT协议的视频直播服务08\-03](https://github.com/aqi00/p/18288645)[45\.FFmpeg开发笔记（四十四）毕业设计可做的几个拉满颜值的音视频APP08\-04](https://github.com/aqi00/p/18328118)[46\.FFmpeg开发笔记（四十五）使用SRT Streamer开启APP直播推流08\-10](https://github.com/aqi00/p/18328119)[47\.FFmpeg开发笔记（四十六）利用SRT协议构建手机APP的直播Demo08\-11](https://github.com/aqi00/p/18328121)[48\.FFmpeg开发笔记（四十七）寒冬下安卓程序员的几个技术转型发展方向08\-17](https://github.com/aqi00/p/18328122)[49\.FFmpeg开发笔记（四十八）从0开始搭建直播系统的开源软件架构08\-18](https://github.com/aqi00/p/18328123)[50\.FFmpeg开发笔记（四十九）助您在毕业设计中脱颖而出的几个流行APP08\-31](https://github.com/aqi00/p/18328125)[51\.FFmpeg开发笔记（五十）聊聊几种流媒体传输技术的前世今生09\-01](https://github.com/aqi00/p/18390366)[52\.FFmpeg开发笔记（五十一）适合学习研究的几个音视频开源框架09\-07](https://github.com/aqi00/p/18390371)[53\.FFmpeg开发笔记（五十二）移动端的国产视频播放器GSYVideoPlayer09\-08](https://github.com/aqi00/p/18390374)[54\.FFmpeg开发笔记（五十三）移动端的国产直播录制工具EasyPusher09\-21](https://github.com/aqi00/p/18390381)[55\.FFmpeg开发笔记（五十四）使用EasyPusher实现移动端的RTSP直播09\-22](https://github.com/aqi00/p/18390389)[56\.FFmpeg开发笔记（五十五）寒冬里的安卓程序员可进阶修炼的几种姿势10\-12](https://github.com/aqi00/p/18450136)[57\.FFmpeg开发笔记（五十六）使用Media3的Exoplayer播放网络视频10\-13](https://github.com/aqi00/p/18450140)[58\.FFmpeg开发笔记（五十七）使用Media3的Transformer加工视频文件10\-16](https://github.com/aqi00/p/18450142)[59\.FFmpeg开发笔记（五十八）把32位采样的MP3转换为16位的PCM音频10\-19](https://github.com/aqi00/p/18450146)[60\.FFmpeg开发笔记（五十九）Linux编译ijkplayer的Android平台so库10\-23](https://github.com/aqi00/p/18450148)61\.FFmpeg开发笔记（六十）使用国产的ijkplayer播放器观看网络视频10\-26收起
​ijkplayer是Bilibili公司（简称B站）基于FFmpeg3\.4研发并开源的国产播放器，它可运行于Android和iOS系统，既支持播放本地视频文件，也支持播放网络上的流媒体链接。
 之前的文章《Linux编译ijkplayer的Android平台so库》介绍了如何编译获得App工程所需ijkplayer的so文件，接下来还要把官方的案例工程导入到新版的Android Studio，才能开展后续的App调试和开发工作。
这里以Android Studio Dolphin（小海豚版本）为例，介绍如何在App工程中导入并使用ijkplayer库，详细的操作步骤如下。


# 一、修改案例工程的Gradle版本


打开案例工程的gradle/wrapper/gradle\-wrapper.properties，把下面这行配置




```
distributionUrl=https\://services.gradle.org/distributions/gradle-2.14.1-all.zip
```


改为下面这行配置




```
distributionUrl=https\://services.gradle.org/distributions/gradle-5.4.1-bin.zip
```


也就是把Gradle版本版本从2\.14\.1升级到5\.4\.1。


# 二、修改项目级别的build.gradle


打开项目级别的build.gradle，依次完成以下三处修改。
1、把下面这行jcenter配置




```
jcenter()
```


替换为下列的仓库配置




```
gradlePluginPortal()
google()
mavenCentral()
// 以下四行添加阿里云的仓库地址，方便国内开发者下载相关插件
maven { url 'https://maven.aliyun.com/repository/jcenter' }
maven { url 'https://maven.aliyun.com/repository/google'}
maven { url 'https://maven.aliyun.com/repository/gradle-plugin'}
maven { url 'https://maven.aliyun.com/repository/public'}
maven { url 'https://jitpack.io' }
```


2、把下面几行的Gradle版本信息




```
classpath 'com.android.tools.build:gradle:2.1.3'
classpath 'com.github.dcendents:android-maven-gradle-plugin:1.4.1'
classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.7'
```


替换为下面的Gradle版本信息




```
classpath 'com.android.tools.build:gradle:3.2.0'
```


3、把下面几行的SDK版本信息




```
compileSdkVersion = 25
buildToolsVersion = "25.0.3"
targetSdkVersion = 25
```


替换为下面的SDK版本信息




```
compileSdkVersion = 28
buildToolsVersion = "28.0.3"
targetSdkVersion = 28
```


# 三、修改模块级别的build.gradle


打开各模块的build.gradle，依次完成以下三处修改。
1、把各模块build.gradle里面所有的compile替换为implementation
2、把各模块build.gradle里面所有的“minSdkVersion 9”替换为“minSdkVersion 21”
3、单独打开ijkplayer\-example模块的build.gradle，先把productFlavors和几行all32Compile与all64Compile统统注释掉，再把下面的导包配置




```
compile 'com.android.support:appcompat-v7:23.0.1'
compile 'com.android.support:preference-v7:23.0.1'
compile 'com.android.support:support-annotations:23.0.1'
```


替换为下面的导包配置，也就是把support库升级到28\.0\.0版本。




```
implementation 'com.android.support:appcompat-v7:28.0.0'
implementation 'com.android.support:preference-v7:28.0.0'
implementation 'com.android.support:support-annotations:28.0.0'
```


# 四、导入编译好的so文件


把根据《Linux编译ijkplayer的Android平台so库》编译出来的三个so文件放到ijkplayer\-example模块的src/main/jniLibs/arm64\-v8a目录下，这样Android Studio会在编译时自动加载这里的so文件。


# 五、添加直播链接的播放代码


打开ijkplayer\-example模块的FileExplorerActivity.java，在onCreate方法末尾补充下面的播放代码。




```
final  Context context = this;
FrameLayout fr_body = findViewById(R.id.body);
LinearLayout ll_body = new LinearLayout(context);
ll_body.setOrientation(LinearLayout.VERTICAL);
fr_body.addView(ll_body);
final EditText et_url = new EditText(context);
et_url.setText("http://124.70.xxx.xxx:8080/live/test/hls.m3u8");
ll_body.addView(et_url);
Button btn_go = new Button(context);
btn_go.setText("开始播放");
btn_go.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        VideoActivity.intentTo(context, et_url.getText().toString(), "测试视频");
    }
});
ll_body.addView(btn_go);
```


以上五个步骤的修改之后，编译运行ijkplayer\-example模块的App工程，在真机上看到的ijkplayer播放界面如下图所示。


![](https://img2024.cnblogs.com/blog/729938/202410/729938-20241007153310875-410784585.jpg)


可见通过ijkplayer成功在案例App上观看网络直播地址。


更多详细的FFmpeg开发知识参见[《FFmpeg开发实战：从零基础到短视频上线》](https://item.jd.com/14020415.html "《FFmpeg开发实战：从零基础到短视频上线》")一书。


